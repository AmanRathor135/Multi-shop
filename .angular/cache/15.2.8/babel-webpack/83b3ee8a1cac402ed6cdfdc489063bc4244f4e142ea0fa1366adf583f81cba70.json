{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/product.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/router\";\nfunction ProductsFeaturedComponent_div_1_a_6_span_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵelement(1, \"i\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const icon_r4 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵclassMap(icon_r4);\n  }\n}\nconst _c0 = function (a1) {\n  return [\"/Shop/Shop-details\", a1];\n};\nfunction ProductsFeaturedComponent_div_1_a_6_span_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵelement(1, \"i\", 18);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const icon_r4 = i0.ɵɵnextContext().$implicit;\n    const product_r1 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵclassMap(icon_r4);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(4, _c0, product_r1.id));\n  }\n}\nfunction ProductsFeaturedComponent_div_1_a_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"a\", 16);\n    i0.ɵɵtemplate(1, ProductsFeaturedComponent_div_1_a_6_span_1_Template, 2, 3, \"span\", 17);\n    i0.ɵɵtemplate(2, ProductsFeaturedComponent_div_1_a_6_span_2_Template, 2, 6, \"span\", 17);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const last_r5 = ctx.last;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !last_r5);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", last_r5);\n  }\n}\nfunction ProductsFeaturedComponent_div_1_ng_container_20_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelement(1, \"small\", 19);\n    i0.ɵɵelementContainerEnd();\n  }\n}\nfunction ProductsFeaturedComponent_div_1_ng_container_20_ng_container_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelement(1, \"small\", 20);\n    i0.ɵɵelementContainerEnd();\n  }\n}\nfunction ProductsFeaturedComponent_div_1_ng_container_20_ng_container_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelement(1, \"small\", 21);\n    i0.ɵɵelementContainerEnd();\n  }\n}\nfunction ProductsFeaturedComponent_div_1_ng_container_20_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, ProductsFeaturedComponent_div_1_ng_container_20_ng_container_1_Template, 2, 0, \"ng-container\", 17);\n    i0.ɵɵtemplate(2, ProductsFeaturedComponent_div_1_ng_container_20_ng_container_2_Template, 2, 0, \"ng-container\", 17);\n    i0.ɵɵtemplate(3, ProductsFeaturedComponent_div_1_ng_container_20_ng_container_3_Template, 2, 0, \"ng-container\", 17);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const i_r12 = ctx.index;\n    const product_r1 = i0.ɵɵnextContext().$implicit;\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", i_r12 < ctx_r3.math.floor(product_r1.rating.rate));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", i_r12 == ctx_r3.math.floor(product_r1.rating.rate));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", i_r12 > product_r1.rating.rate);\n  }\n}\nfunction ProductsFeaturedComponent_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 2)(1, \"div\", 3)(2, \"div\", 4)(3, \"div\", 5);\n    i0.ɵɵelement(4, \"img\", 6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"div\", 7);\n    i0.ɵɵtemplate(6, ProductsFeaturedComponent_div_1_a_6_Template, 3, 2, \"a\", 8);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(7, \"div\", 9)(8, \"div\", 10)(9, \"a\", 11);\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(11, \"div\", 12)(12, \"h5\");\n    i0.ɵɵtext(13);\n    i0.ɵɵpipe(14, \"currency\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"h6\", 13)(16, \"del\");\n    i0.ɵɵtext(17);\n    i0.ɵɵpipe(18, \"currency\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(19, \"div\", 14);\n    i0.ɵɵtemplate(20, ProductsFeaturedComponent_div_1_ng_container_20_Template, 4, 3, \"ng-container\", 15);\n    i0.ɵɵelementStart(21, \"small\");\n    i0.ɵɵtext(22);\n    i0.ɵɵelementEnd()()()()();\n  }\n  if (rf & 2) {\n    const product_r1 = ctx.$implicit;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵpropertyInterpolate1(\"src\", \"http://192.168.1.178:1108\", product_r1.image, \"\", i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.icons);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(15, _c0, product_r1.id));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(product_r1.title);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(14, 9, product_r1.price * ctx_r0.currencyPrice, ctx_r0.currency));\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(18, 12, product_r1.price * ctx_r0.currencyPrice, ctx_r0.currency));\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.totalRate);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate2(\"(The Rating is \", product_r1.rating.rate, \" Out of \", product_r1.rating.count, \" Reviews)\");\n  }\n}\nexport class ProductsFeaturedComponent {\n  constructor(service, cdr) {\n    this.service = service;\n    this.cdr = cdr;\n    this.searchText = '';\n    this.productList = [];\n    this.subscription = [];\n    this.math = Math;\n    this.icons = ['fa fa-shopping-cart', 'far fa-heart', 'fa fa-sync-alt', 'fa fa-search']; //'far fa-heart',\n  }\n\n  ngOnInit() {\n    this.getProducts();\n    this.rating(5);\n  }\n  getProducts() {\n    let sub1 = this.service.currency.subscribe(res => {\n      if (res) {\n        this.currency = res;\n        this.getPrice();\n        this.cdr.markForCheck();\n      }\n    });\n    this.subscription.push(sub1);\n    let sub2 = this.service.fetchLimitedProducts().subscribe({\n      next: res => {\n        this.productList = res.data;\n      },\n      error: err => {\n        console.log('err', err);\n      },\n      complete: () => {\n        this.cdr.markForCheck();\n      }\n    });\n    this.subscription.push(sub2);\n  }\n  getPrice() {\n    let value = localStorage.getItem('currencyPrice');\n    value = JSON.parse(value);\n    this.currencyPrice = value[this.currency];\n  }\n  rating(value) {\n    this.totalRate = Array(value);\n  }\n  ngOnDestroy() {\n    this.subscription.forEach(subscriptionRow => {\n      subscriptionRow.unsubscribe();\n    });\n  }\n}\nProductsFeaturedComponent.ɵfac = function ProductsFeaturedComponent_Factory(t) {\n  return new (t || ProductsFeaturedComponent)(i0.ɵɵdirectiveInject(i1.ProductService), i0.ɵɵdirectiveInject(i0.ChangeDetectorRef));\n};\nProductsFeaturedComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ProductsFeaturedComponent,\n  selectors: [[\"app-products-featured\"]],\n  decls: 2,\n  vars: 1,\n  consts: [[1, \"row\", \"px-xl-5\"], [\"class\", \"col-lg-3 col-md-4 col-sm-6 pb-1\", 4, \"ngFor\", \"ngForOf\"], [1, \"col-lg-3\", \"col-md-4\", \"col-sm-6\", \"pb-1\"], [1, \"product-item\", \"bg-light\", \"mb-4\"], [1, \"product-img\", \"position-relative\", \"overflow-hidden\", 2, \"cursor\", \"pointer\"], [2, \"width\", \"100%\"], [\"alt\", \"\", 1, \"img-fluid\", \"w-100\", \"p-3\", 2, \"width\", \"100% !important\", \"height\", \"300px\", 3, \"src\"], [1, \"product-action\"], [\"class\", \"btn btn-outline-dark btn-square\", 4, \"ngFor\", \"ngForOf\"], [1, \"text-center\", \"py-4\"], [2, \"min-height\", \"60px\"], [1, \"h6\", \"text-decoration-none\", 3, \"routerLink\"], [1, \"d-flex\", \"align-items-center\", \"justify-content-center\", \"mt-2\"], [1, \"text-muted\", \"ml-2\"], [1, \"d-flex\", \"align-items-center\", \"justify-content-center\", \"mb-1\"], [4, \"ngFor\", \"ngForOf\"], [1, \"btn\", \"btn-outline-dark\", \"btn-square\"], [4, \"ngIf\"], [3, \"routerLink\"], [1, \"fa\", \"fa-star\", \"text-primary\", \"mr-1\"], [1, \"fa\", \"fa-star-half-alt\", \"text-primary\", \"mr-1\"], [1, \"far\", \"fa-star\", \"text-primary\", \"mr-1\"]],\n  template: function ProductsFeaturedComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0);\n      i0.ɵɵtemplate(1, ProductsFeaturedComponent_div_1_Template, 23, 17, \"div\", 1);\n      i0.ɵɵelementEnd();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngForOf\", ctx.productList);\n    }\n  },\n  dependencies: [i2.NgForOf, i2.NgIf, i3.RouterLink, i2.CurrencyPipe],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"],\n  changeDetection: 0\n});","map":{"version":3,"mappings":"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","names":["i0","ProductsFeaturedComponent","constructor","service","cdr","Math","ngOnInit","getProducts","rating","sub1","currency","subscribe","res","getPrice","markForCheck","subscription","push","sub2","fetchLimitedProducts","next","productList","data","error","err","console","log","complete","value","localStorage","getItem","JSON","parse","currencyPrice","totalRate","Array","ngOnDestroy","forEach","subscriptionRow","unsubscribe","selectors","decls","vars","consts","template"],"sourceRoot":"","sources":["/home/aman.rathor/Multi-shop/src/app/layout/products-featured/products-featured.component.html","/home/aman.rathor/Multi-shop/src/app/layout/products-featured/products-featured.component.ts"],"sourcesContent":["<!-- Products Start -->\n     <div class=\"row px-xl-5\">\n         <div class=\"col-lg-3 col-md-4 col-sm-6 pb-1\" *ngFor=\"let product of productList\">\n            <div class=\"product-item bg-light mb-4\">\n                <div class=\"product-img position-relative overflow-hidden\" style=\"cursor: pointer;\">\n                   <div style=\"width: 100%; \">\n                    <img class=\"img-fluid w-100 p-3\" src=\"http://192.168.1.178:1108{{product.image}}\" alt=\"\"  style=\"width: 100% !important; height: 300px;\">\n                   </div>\n                    <div class=\"product-action\">\n                        <a class=\"btn btn-outline-dark btn-square\" *ngFor=\"let icon of icons; let last=last\">\n                            <span *ngIf=\"!last\">\n                                <i class={{icon}}></i>\n                            </span>\n                            <span *ngIf=\"last\">\n                                <i class={{icon}}  [routerLink]=\"['/Shop/Shop-details', product.id]\"></i>\n                            </span>\n                        </a>\n                    </div>\n                </div>\n                <div class=\"text-center py-4\">\n                    <div  style=\"min-height: 60px;\">\n                        <a class=\"h6 text-decoration-none\" [routerLink]=\"['/Shop/Shop-details', product.id]\">{{product.title}}</a>\n                    </div>\n                    <div class=\"d-flex align-items-center justify-content-center mt-2\">\n                        <h5>{{product.price*currencyPrice | currency:currency}}</h5>\n                        <h6 class=\"text-muted ml-2\"><del>{{product.price*currencyPrice | currency:currency}}</del></h6>\n                    </div>\n                    <div class=\"d-flex align-items-center justify-content-center mb-1\">\n                        <ng-container *ngFor=\"let rate of totalRate; let i=index\">\n                            <ng-container *ngIf=\"i<math.floor(product.rating.rate)\">\n                                <small class=\"fa fa-star text-primary mr-1\"></small>\n                            </ng-container>\n                            <ng-container *ngIf=\"(i==math.floor(product.rating.rate))\">\n                                <small class=\"fa fa-star-half-alt text-primary mr-1\"></small>\n                            </ng-container>\n                            <ng-container *ngIf=\"i>product.rating.rate\">\n                                <small class=\"far fa-star text-primary mr-1\"></small>\n                            </ng-container>\n                        </ng-container>\n                        <small>(The Rating is {{product.rating.rate}} Out of {{product.rating.count}} Reviews)</small>\n                    </div>\n                </div>\n            </div>\n        </div>\n     </div>\n <!-- Products End -->\n\n","import { ChangeDetectionStrategy, ChangeDetectorRef, Component, OnDestroy, OnInit } from '@angular/core';\nimport { Subscription } from 'rxjs';\nimport { ProductService } from 'src/app/services/product.service';\n\n@Component({\n  selector: 'app-products-featured',\n  templateUrl: './products-featured.component.html',\n  styleUrls: ['./products-featured.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ProductsFeaturedComponent implements OnInit, OnDestroy {\n  searchText:string = '';\n  productList:any[] = [];\n  subscription:Subscription[] = [];\n  currency:any;\n  currencyPrice:any;\n  math= Math;\n  totalRate:any;\n  icons:any[]= ['fa fa-shopping-cart', 'far fa-heart', 'fa fa-sync-alt', 'fa fa-search']  //'far fa-heart',\n \n  constructor(private service:ProductService, private cdr:ChangeDetectorRef) {\n    \n  }\n\n  ngOnInit(): void {\n    this.getProducts()\n    this.rating(5)\n  }\n\n  getProducts(){\n   let sub1 = this.service.currency.subscribe((res:any) => {\n      if(res){ \n        this.currency = res; \n        this.getPrice();\n        this.cdr.markForCheck();\n      }\n    });\n    this.subscription.push(sub1)\n\n   let sub2 = this.service.fetchLimitedProducts().subscribe({\n      next: (res:any) => {\n        this.productList = res.data;\n      },\n      error: (err:any) => {\n        console.log('err', err)\n      },\n      complete: () => {this.cdr.markForCheck();}\n    });\n    this.subscription.push(sub2)\n  };\n\n  getPrice(){\n    let value:any = localStorage.getItem('currencyPrice');\n    value = JSON.parse(value);\n    this.currencyPrice = value[this.currency];\n  }\n  \n  rating(value:any){\n    this.totalRate = Array(value);\n  };\n\n  ngOnDestroy(): void {\n    this.subscription.forEach((subscriptionRow:any) => {\n      subscriptionRow.unsubscribe();\n    });\n  }\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}