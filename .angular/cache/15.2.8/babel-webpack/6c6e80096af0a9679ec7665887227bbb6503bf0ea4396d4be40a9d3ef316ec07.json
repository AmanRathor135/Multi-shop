{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { ChangeDetectionStrategy, Component } from '@angular/core';\nlet ProductListComponent = class ProductListComponent {\n  constructor(service, activateRoute, cdr) {\n    this.service = service;\n    this.activateRoute = activateRoute;\n    this.cdr = cdr;\n    this.total = 0;\n    this.favoriteItemList = [];\n    this.page = 1;\n    this.isShow = true;\n    this.math = Math;\n    this.productList = [];\n    this.Dropdown1 = [{\n      title: 'Sorting',\n      category: ['Ascending', 'Descending']\n    }];\n    this.Dropdown2 = [{\n      title: 'Showing',\n      category: ['10', '20', '30']\n    }];\n    this.service.totalFavoriteItems.next(this.total);\n  }\n  ngOnInit() {\n    this.getAllProducts();\n    this.service.totalCartItems.next(true);\n    let list = localStorage.getItem('favoriteItemList');\n    list = JSON.parse(list);\n    this.service.totalFavoriteItems.next(list.length);\n    this.service.currency.subscribe(res => {\n      if (res) {\n        this.currency = res;\n        this.getPrice();\n        this.cdr.markForCheck();\n      }\n    });\n    this.activateRoute.paramMap.subscribe(res => {\n      setTimeout(() => {\n        this.category = res.params.id;\n      }, 1);\n      if (this.category) {\n        this.getProducts();\n        this.cdr.markForCheck();\n      }\n    });\n    this.rating(5);\n  }\n  getPrice() {\n    let value = localStorage.getItem('currencyPrice');\n    value = JSON.parse(value);\n    this.currencyPrice = value[this.currency];\n  }\n  doFavorites(product, index) {\n    product.isShow = !product.isShow;\n    this.selectedIndex = index;\n    this.total = product.isShow ? this.total + 1 : this.total - 1;\n    this.service.totalFavoriteItems.next(this.total);\n    if (product.isShow === true) {\n      this.favoriteItemList.push(product);\n      localStorage.setItem('favoriteItemList', JSON.stringify(this.favoriteItemList));\n    } else {\n      this.favoriteItemList.pop();\n      localStorage.setItem('favoriteItemList', JSON.stringify(this.favoriteItemList));\n    }\n    this.cdr.markForCheck();\n  }\n  pageChangeEvent(event) {\n    this.page = event++;\n  }\n  getProducts() {\n    this.service.getSpecificCategory(this.category).subscribe({\n      next: res => {\n        this.productList = res;\n      },\n      error: err => {\n        console.log('err', err);\n      },\n      complete: () => {\n        this.cdr.markForCheck();\n      }\n    });\n  }\n  getAllProducts() {\n    this.service.getAllProducts().subscribe({\n      next: res => {\n        this.productList = res.data;\n        this.productList.map(product => product['isShow'] = false);\n      },\n      error: err => {\n        console.log('err', err);\n      },\n      complete: () => {\n        this.cdr.markForCheck();\n      }\n    });\n  }\n  show() {\n    this.isShow = !this.isShow;\n  }\n  productInDesc() {\n    this.service.getAllProductInDesc().subscribe({\n      next: res => {\n        this.productList = res.data;\n      },\n      error: err => {\n        console.log('err', err);\n      },\n      complete: () => {\n        this.cdr.markForCheck();\n      }\n    });\n  }\n  rating(value) {\n    this.totalRate = Array(value);\n  }\n};\nProductListComponent = __decorate([Component({\n  selector: 'app-product-list',\n  templateUrl: './product-list.component.html',\n  styleUrls: ['./product-list.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})], ProductListComponent);\nexport { ProductListComponent };","map":{"version":3,"mappings":"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","names":["ChangeDetectionStrategy","Component","ProductListComponent","constructor","service","activateRoute","cdr","Math","title","category","totalFavoriteItems","next","total","ngOnInit","getAllProducts","totalCartItems","list","localStorage","getItem","JSON","parse","length","currency","subscribe","res","getPrice","markForCheck","paramMap","setTimeout","params","id","getProducts","rating","value","currencyPrice","doFavorites","product","index","isShow","selectedIndex","favoriteItemList","push","setItem","stringify","pop","pageChangeEvent","event","page","getSpecificCategory","productList","error","err","console","log","complete","data","map","show","productInDesc","getAllProductInDesc","totalRate","Array","selector","templateUrl","styleUrls","changeDetection","OnPush"],"sourceRoot":"","sources":["/home/aman.rathor/Multi-shop/src/app/shopping/product-list/product-list.component.ts"],"sourcesContent":["import { ChangeDetectionStrategy, ChangeDetectorRef, Component, OnInit } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { ProductService } from 'src/app/services/product.service';\n\n@Component({\n  selector: 'app-product-list',\n  templateUrl: './product-list.component.html',\n  styleUrls: ['./product-list.component.scss'],\n  changeDetection:ChangeDetectionStrategy.OnPush\n})\nexport class ProductListComponent implements OnInit {\n  total: number = 0;\n  currency: any;\n  currencyPrice:any;\n  totalItem:any;\n  selectedIndex:any;\n  favoriteItemList:any[] = [];\n  page: number = 1;\n  isShow: boolean = true;\n  category: any;\n  math = Math;\n  productList: any[] = [];\n  totalRate: any;\n\n  Dropdown1: any[] = [\n    {\n      title: 'Sorting',\n      category: ['Ascending', 'Descending'],\n    },\n  ];\n\n  Dropdown2: any[] = [\n    {\n      title: 'Showing',\n      category: ['10', '20', '30'],\n    },\n  ];\n\n  constructor(\n    private service: ProductService,\n    private activateRoute: ActivatedRoute,\n    private cdr:ChangeDetectorRef\n  ) {\n    this.service.totalFavoriteItems.next(this.total);\n  }\n\n  ngOnInit(): void {\n    this.getAllProducts();\n    this.service.totalCartItems.next(true);\n\n    let list:any = localStorage.getItem('favoriteItemList');\n    list = JSON.parse(list);\n    this.service.totalFavoriteItems.next(list.length); \n\n    this.service.currency.subscribe((res: any) => {\n      if (res) { \n        this.currency = res; \n        this.getPrice();\n        this.cdr.markForCheck();\n      }\n    });\n\n    this.activateRoute.paramMap.subscribe((res: any) => {\n      setTimeout(() => { this.category = res.params.id;}, 1);\n      if (this.category) {\n        this.getProducts();\n        this.cdr.markForCheck();\n      } \n    });\n\n    this.rating(5);\n  }\n\n  getPrice(){\n    let value:any = localStorage.getItem('currencyPrice');\n    value = JSON.parse(value);\n    this.currencyPrice = value[this.currency];\n  }\n\n  doFavorites(product: any, index:any) {\n    product.isShow = !product.isShow;\n    this.selectedIndex = index;\n    this.total = product.isShow ? this.total + 1 : this.total - 1;\n    this.service.totalFavoriteItems.next(this.total);    \n  \n    if(product.isShow === true){\n      this.favoriteItemList.push(product);\n      localStorage.setItem('favoriteItemList', JSON.stringify(this.favoriteItemList))\n    }else \n    {\n      this.favoriteItemList.pop();\n      localStorage.setItem('favoriteItemList', JSON.stringify(this.favoriteItemList))\n    }\n    this.cdr.markForCheck();\n  }\n\n  pageChangeEvent(event: number) {\n    this.page = event++;\n  }\n\n  getProducts() {\n    this.service.getSpecificCategory(this.category).subscribe({\n      next: (res: any) => {\n        this.productList = res;\n      },\n      error: (err: any) => {\n        console.log('err', err);\n      },\n      complete: () => {this.cdr.markForCheck();},\n    });\n  }\n\n  getAllProducts() {\n    this.service.getAllProducts().subscribe({\n      next: (res: any) => {\n        this.productList = res.data;\n        this.productList.map((product) => (product['isShow'] = false));\n      },\n      error: (err: any) => {\n        console.log('err', err);\n      },\n      complete: () => {this.cdr.markForCheck();},\n    });\n  }\n\n  show() {\n    this.isShow = !this.isShow;\n  }\n\n  productInDesc() {\n    this.service.getAllProductInDesc().subscribe({\n      next: (res: any) => {\n        this.productList = res.data;\n      },\n      error: (err: any) => {\n        console.log('err', err);\n      },\n      complete: () => {this.cdr.markForCheck();},\n    });\n  }\n\n  rating(value: any) {\n    this.totalRate = Array(value);\n  }\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}